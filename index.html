<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sediver ITSM | Project Dashboard</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1e3a5f;
            --primary-light: #2d5a87;
            --accent: #0ea5e9;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --purple: #8b5cf6;
            --gray-50: #f8fafc;
            --gray-100: #f1f5f9;
            --gray-200: #e2e8f0;
            --gray-300: #cbd5e1;
            --gray-400: #94a3b8;
            --gray-500: #64748b;
            --gray-600: #475569;
            --gray-700: #334155;
            --gray-800: #1e293b;
            --gray-900: #0f172a;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--gray-100);
            color: var(--gray-800);
            line-height: 1.5;
        }

        /* === HEADER === */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 2rem 3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-content h1 {
            font-size: 1.75rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .header-content p {
            opacity: 0.85;
            font-size: 0.9rem;
        }

        .header-stats {
            display: flex;
            gap: 2rem;
        }

        .header-stat {
            text-align: center;
            padding: 0.75rem 1.5rem;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .header-stat .value {
            font-size: 2rem;
            font-weight: 700;
        }

        .header-stat .label {
            font-size: 0.75rem;
            opacity: 0.85;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .header-stat.danger .value {
            color: #fca5a5;
        }

        /* === MAIN LAYOUT === */
        .main {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: var(--accent);
            border-radius: 2px;
        }

        /* === CARDS === */
        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08), 0 4px 12px rgba(0,0,0,0.04);
            overflow: hidden;
        }

        .card-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--gray-800);
        }

        .card-body {
            padding: 1.5rem;
        }

        /* === GRID LAYOUTS === */
        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1.5rem;
        }

        /* === KPI CARDS === */
        .kpi-card {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .kpi-icon {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .kpi-icon.blue { background: #dbeafe; }
        .kpi-icon.green { background: #d1fae5; }
        .kpi-icon.orange { background: #ffedd5; }
        .kpi-icon.red { background: #fee2e2; }
        .kpi-icon.purple { background: #ede9fe; }

        .kpi-content .value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--gray-800);
        }

        .kpi-content .label {
            font-size: 0.8rem;
            color: var(--gray-500);
        }

        /* === PHASE PROGRESS === */
        .phase-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .phase-item {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .phase-name {
            min-width: 100px;
            font-weight: 500;
            font-size: 0.875rem;
            color: var(--gray-700);
        }

        .phase-bar {
            flex: 1;
            height: 28px;
            background: var(--gray-100);
            border-radius: 14px;
            overflow: hidden;
            position: relative;
        }

        .phase-fill {
            height: 100%;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 12px;
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            transition: width 0.5s ease;
        }

        .phase-dates {
            min-width: 140px;
            text-align: right;
            font-size: 0.8rem;
            color: var(--gray-500);
        }

        /* === TABLE === */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }

        thead {
            background: var(--gray-50);
        }

        th {
            padding: 0.875rem 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--gray-600);
            border-bottom: 2px solid var(--gray-200);
            white-space: nowrap;
        }

        td {
            padding: 0.875rem 1rem;
            border-bottom: 1px solid var(--gray-100);
            vertical-align: middle;
        }

        tbody tr:hover {
            background: var(--gray-50);
        }

        tbody tr.critical {
            background: #fef2f2;
        }

        tbody tr.critical:hover {
            background: #fee2e2;
        }

        /* === BADGES === */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .badge-blue { background: #dbeafe; color: #1e40af; }
        .badge-green { background: #d1fae5; color: #065f46; }
        .badge-orange { background: #ffedd5; color: #9a3412; }
        .badge-purple { background: #ede9fe; color: #5b21b6; }
        .badge-red { background: #fee2e2; color: #991b1b; }
        .badge-gray { background: #f1f5f9; color: #475569; }

        .status-badge {
            padding: 0.375rem 0.875rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-not-started { background: var(--gray-100); color: var(--gray-600); }
        .status-in-progress { background: #dbeafe; color: #1e40af; }
        .status-completed { background: #d1fae5; color: #065f46; }
        .status-blocked { background: #fee2e2; color: #991b1b; }

        .priority-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }

        .priority-alta { background: var(--danger); }
        .priority-media { background: var(--warning); }
        .priority-bassa { background: var(--success); }

        /* === TASK NAME === */
        .task-name {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .task-name .critical-icon {
            color: var(--danger);
            font-weight: bold;
        }

        .task-name .milestone-icon {
            color: var(--purple);
        }

        /* === GANTT === */
        .gantt-container {
            overflow-x: auto;
            padding: 1rem 0;
        }

        #gantt-chart {
            min-height: 500px;
        }

        .gantt-legend {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            color: var(--gray-600);
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        /* === CRITICAL PATH === */
        .critical-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .critical-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--gray-50);
            border-radius: 10px;
            border-left: 4px solid var(--danger);
        }

        .critical-item .number {
            width: 28px;
            height: 28px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .critical-item .info {
            flex: 1;
        }

        .critical-item .name {
            font-weight: 500;
            color: var(--gray-800);
            margin-bottom: 0.125rem;
        }

        .critical-item .dates {
            font-size: 0.8rem;
            color: var(--gray-500);
        }

        .critical-item .impact {
            text-align: right;
            font-size: 0.75rem;
        }

        .critical-item .impact .label {
            color: var(--gray-500);
        }

        .critical-item .impact .value {
            color: var(--danger);
            font-weight: 600;
        }

        /* === RISK SECTION === */
        .risk-grid {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 1.5rem;
        }

        .risk-matrix {
            display: grid;
            grid-template-columns: 24px repeat(3, 1fr);
            grid-template-rows: repeat(3, 50px) 24px;
            gap: 2px;
            background: var(--gray-200);
            border-radius: 8px;
            overflow: hidden;
        }

        .risk-matrix .cell {
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            color: var(--gray-500);
        }

        .risk-matrix .cell.y-axis {
            writing-mode: vertical-lr;
            transform: rotate(180deg);
            font-weight: 500;
        }

        .risk-matrix .cell.x-axis {
            font-weight: 500;
        }

        .risk-matrix .cell.low { background: #d1fae5; }
        .risk-matrix .cell.medium { background: #fef3c7; }
        .risk-matrix .cell.high { background: #fee2e2; }

        .risk-dot {
            width: 22px;
            height: 22px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            font-size: 0.65rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .risk-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .risk-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            background: var(--gray-50);
            border-radius: 8px;
            border-left: 4px solid;
        }

        .risk-item.low { border-left-color: var(--success); }
        .risk-item.medium { border-left-color: var(--warning); }
        .risk-item.high { border-left-color: var(--danger); }

        .risk-item .name {
            font-weight: 500;
            font-size: 0.875rem;
            color: var(--gray-800);
        }

        .risk-item .category {
            font-size: 0.75rem;
            color: var(--gray-500);
        }

        .risk-score {
            padding: 0.25rem 0.625rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .risk-score.low { background: #d1fae5; color: #065f46; }
        .risk-score.medium { background: #fef3c7; color: #92400e; }
        .risk-score.high { background: #fee2e2; color: #991b1b; }

        /* === FOOTER === */
        .footer {
            text-align: center;
            padding: 2rem;
            color: var(--gray-500);
            font-size: 0.8rem;
            border-top: 1px solid var(--gray-200);
            margin-top: 2rem;
        }

        /* === RESPONSIVE === */
        @media (max-width: 1200px) {
            .grid-4 { grid-template-columns: repeat(2, 1fr); }
            .grid-3 { grid-template-columns: 1fr; }
            .risk-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 768px) {
            .header { flex-direction: column; gap: 1.5rem; text-align: center; }
            .header-stats { flex-wrap: wrap; justify-content: center; }
            .grid-4, .grid-2 { grid-template-columns: 1fr; }
            .main { padding: 1rem; }
        }
    </style>
</head>
<body>

<!-- HEADER -->
<header class="header">
    <div class="header-content">
        <h1>üèóÔ∏è Sediver ITSM Implementation</h1>
        <p>Freshservice ‚Ä¢ ITIL 4 ‚Ä¢ CRMpartners Project Management</p>
    </div>
    <div class="header-stats">
        <div class="header-stat">
            <div class="value">53</div>
            <div class="label">Attivit√† Totali</div>
        </div>
        <div class="header-stat">
            <div class="value">28</div>
            <div class="label">Critical Path</div>
        </div>
        <div class="header-stat danger">
            <div class="value">98</div>
            <div class="label">Giorni al Go-Live</div>
        </div>
        <div class="header-stat">
            <div class="value">07 Mag</div>
            <div class="label">Go-Live Date</div>
        </div>
    </div>
</header>

<!-- MAIN CONTENT -->
<main class="main">

    <!-- KPI ROW -->
    <section class="section">
        <div class="grid-4">
            <div class="kpi-card">
                <div class="kpi-icon blue">üìã</div>
                <div class="kpi-content">
                    <div class="value">53</div>
                    <div class="label">Attivit√† Pianificate</div>
                </div>
            </div>
            <div class="kpi-card">
                <div class="kpi-icon green">‚úÖ</div>
                <div class="kpi-content">
                    <div class="value">0</div>
                    <div class="label">Completate</div>
                </div>
            </div>
            <div class="kpi-card">
                <div class="kpi-icon orange">üîÑ</div>
                <div class="kpi-content">
                    <div class="value">0</div>
                    <div class="label">In Corso</div>
                </div>
            </div>
            <div class="kpi-card">
                <div class="kpi-icon red">‚ö°</div>
                <div class="kpi-content">
                    <div class="value">28</div>
                    <div class="label">Critical Path</div>
                </div>
            </div>
        </div>
    </section>

    <!-- PHASE PROGRESS & MILESTONES -->
    <section class="section">
        <div class="grid-2">
            <div class="card">
                <div class="card-header">
                    <h3>üìà Avanzamento Fasi ITSM</h3>
                </div>
                <div class="card-body">
                    <div class="phase-list">
                        <div class="phase-item">
                            <span class="phase-name">Assessment</span>
                            <div class="phase-bar">
                                <div class="phase-fill" style="width: 0%; background: #3b82f6;">0%</div>
                            </div>
                            <span class="phase-dates">29 Gen ‚Üí 17 Feb</span>
                        </div>
                        <div class="phase-item">
                            <span class="phase-name">Design</span>
                            <div class="phase-bar">
                                <div class="phase-fill" style="width: 0%; background: #10b981;">0%</div>
                            </div>
                            <span class="phase-dates">17 Feb ‚Üí 03 Mar</span>
                        </div>
                        <div class="phase-item">
                            <span class="phase-name">Build</span>
                            <div class="phase-bar">
                                <div class="phase-fill" style="width: 0%; background: #f59e0b;">0%</div>
                            </div>
                            <span class="phase-dates">03 Mar ‚Üí 16 Apr</span>
                        </div>
                        <div class="phase-item">
                            <span class="phase-name">UAT</span>
                            <div class="phase-bar">
                                <div class="phase-fill" style="width: 0%; background: #8b5cf6;">0%</div>
                            </div>
                            <span class="phase-dates">16 Apr ‚Üí 07 Mag</span>
                        </div>
                        <div class="phase-item">
                            <span class="phase-name">Go-Live</span>
                            <div class="phase-bar">
                                <div class="phase-fill" style="width: 0%; background: #ef4444;">0%</div>
                            </div>
                            <span class="phase-dates">07 Maggio 2026</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>üèÅ Milestones Progetto</h3>
                </div>
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Milestone</th>
                                <th>Data</th>
                                <th>Fase</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Assessment Complete</strong></td>
                                <td>17 Feb 2026</td>
                                <td><span class="badge badge-blue">Assessment</span></td>
                            </tr>
                            <tr>
                                <td><strong>Design Freeze</strong></td>
                                <td>03 Mar 2026</td>
                                <td><span class="badge badge-green">Design</span></td>
                            </tr>
                            <tr>
                                <td><strong>Core Build Complete</strong></td>
                                <td>31 Mar 2026</td>
                                <td><span class="badge badge-orange">Build</span></td>
                            </tr>
                            <tr>
                                <td><strong>UAT Start</strong></td>
                                <td>16 Apr 2026</td>
                                <td><span class="badge badge-purple">UAT</span></td>
                            </tr>
                            <tr>
                                <td><strong>üöÄ Go-Live</strong></td>
                                <td>07 Mag 2026</td>
                                <td><span class="badge badge-red">Go-Live</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <!-- GANTT CHART -->
    <section class="section">
        <div class="card">
            <div class="card-header">
                <h3>üìÖ GANTT Chart - Timeline Progetto</h3>
                <div class="gantt-legend">
                    <div class="legend-item"><div class="legend-color" style="background: #3b82f6;"></div> Assessment</div>
                    <div class="legend-item"><div class="legend-color" style="background: #10b981;"></div> Design</div>
                    <div class="legend-item"><div class="legend-color" style="background: #f59e0b;"></div> Build</div>
                    <div class="legend-item"><div class="legend-color" style="background: #8b5cf6;"></div> UAT</div>
                    <div class="legend-item"><div class="legend-color" style="background: #ef4444; border: 2px solid #b91c1c;"></div> Critical Path</div>
                    <div class="legend-item"><div class="legend-color" style="background: #7c3aed; transform: rotate(45deg); width: 12px; height: 12px;"></div> Milestone</div>
                </div>
            </div>
            <div class="card-body">
                <div class="gantt-container">
                    <div id="gantt-chart"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- ACTIVITY MATRIX -->
    <section class="section">
        <div class="card">
            <div class="card-header">
                <h3>üìã Activity Matrix</h3>
                <span style="font-size: 0.8rem; color: var(--gray-500);">‚ö° Critical Path ‚Ä¢ üèÅ Milestone</span>
            </div>
            <div class="card-body">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Task</th>
                                <th>Fase ITSM</th>
                                <th>Owner</th>
                                <th>Priorit√†</th>
                                <th>Start</th>
                                <th>End</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="activity-tbody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <!-- CRITICAL PATH & RISKS -->
    <section class="section">
        <div class="grid-2">
            <div class="card">
                <div class="card-header">
                    <h3>‚ö° Critical Path Monitor</h3>
                    <span class="badge badge-red">28 attivit√† ‚Ä¢ 98 giorni</span>
                </div>
                <div class="card-body">
                    <div class="critical-list" id="critical-list">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>‚ö†Ô∏è Risk Register</h3>
                    <span class="badge badge-orange">10 rischi attivi</span>
                </div>
                <div class="card-body">
                    <div class="risk-grid">
                        <div class="risk-matrix">
                            <div class="cell y-axis">Alta</div>
                            <div class="cell medium"></div>
                            <div class="cell high"><div class="risk-dot">5</div></div>
                            <div class="cell high"><div class="risk-dot">1</div></div>
                            
                            <div class="cell y-axis">Media</div>
                            <div class="cell low"></div>
                            <div class="cell medium"><div class="risk-dot">3</div></div>
                            <div class="cell high"><div class="risk-dot">2</div></div>
                            
                            <div class="cell y-axis">Bassa</div>
                            <div class="cell low"><div class="risk-dot">9</div></div>
                            <div class="cell low"><div class="risk-dot">6</div></div>
                            <div class="cell medium"><div class="risk-dot">10</div></div>
                            
                            <div class="cell"></div>
                            <div class="cell x-axis">Basso</div>
                            <div class="cell x-axis">Medio</div>
                            <div class="cell x-axis">Alto</div>
                        </div>
                        <div class="risk-list">
                            <div class="risk-item high">
                                <div>
                                    <div class="name">Ritardo consegna Catalogo</div>
                                    <div class="category">Client Dependency</div>
                                </div>
                                <span class="risk-score high">9</span>
                            </div>
                            <div class="risk-item high">
                                <div>
                                    <div class="name">Complessit√† SSO Integration</div>
                                    <div class="category">Technical</div>
                                </div>
                                <span class="risk-score high">6</span>
                            </div>
                            <div class="risk-item high">
                                <div>
                                    <div class="name">Workflow approvazione complessi</div>
                                    <div class="category">Scope</div>
                                </div>
                                <span class="risk-score high">6</span>
                            </div>
                            <div class="risk-item high">
                                <div>
                                    <div class="name">Scarsa adozione utenti</div>
                                    <div class="category">Change Management</div>
                                </div>
                                <span class="risk-score high">6</span>
                            </div>
                            <div class="risk-item medium">
                                <div>
                                    <div class="name">Definizione SLA incompleta</div>
                                    <div class="category">Requirements</div>
                                </div>
                                <span class="risk-score medium">4</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</main>

<!-- FOOTER -->
<footer class="footer">
    <p>Sediver ITSM Implementation Dashboard ‚Ä¢ ITIL 4 Compliant ‚Ä¢ CRMpartners ¬© 2026</p>
</footer>

<script>
// Project Data
const projectData = {
    phases: [
        { id: 'assessment', name: 'Assessment', color: '#3b82f6' },
        { id: 'design', name: 'Design', color: '#10b981' },
        { id: 'build', name: 'Build', color: '#f59e0b' },
        { id: 'uat', name: 'UAT', color: '#8b5cf6' },
        { id: 'golive', name: 'Go-Live', color: '#ef4444' }
    ],
    tasks: [
        { id: 'T001', name: 'AS IS / TO BE', phase: 'assessment', owner: 'CRMP', priority: 'Alta', start: '2026-01-29', end: '2026-02-09', critical: true, milestone: true },
        { id: 'T002', name: 'Affinamento requisiti TO BE', phase: 'assessment', owner: 'Client', priority: 'Alta', start: '2026-02-10', end: '2026-02-17', critical: true, milestone: false },
        { id: 'T003', name: 'TO BE workflows e approvazioni', phase: 'assessment', owner: 'Client', priority: 'Alta', start: '2026-02-10', end: '2026-02-16', critical: true, milestone: false },
        { id: 'T004', name: 'TO BE SLA', phase: 'assessment', owner: 'CRMP', priority: 'Alta', start: '2026-02-10', end: '2026-02-17', critical: true, milestone: false },
        { id: 'T005', name: 'TO BE Automazioni', phase: 'assessment', owner: 'Client', priority: 'Media', start: '2026-02-10', end: '2026-02-17', critical: false, milestone: true },
        { id: 'T011', name: 'Creazione Gruppi Operatori', phase: 'design', owner: 'CRMP', priority: 'Alta', start: '2026-02-17', end: '2026-03-03', critical: true, milestone: false },
        { id: 'T012', name: 'Creazione Gruppi Richiedenti', phase: 'design', owner: 'CRMP', priority: 'Alta', start: '2026-02-17', end: '2026-03-03', critical: true, milestone: false },
        { id: 'T018', name: 'Creazione Categoria Ticket', phase: 'design', owner: 'CRMP', priority: 'Alta', start: '2026-02-17', end: '2026-03-03', critical: true, milestone: false },
        { id: 'T019', name: 'Creazione Service Item', phase: 'design', owner: 'CRMP', priority: 'Alta', start: '2026-02-17', end: '2026-03-03', critical: true, milestone: false },
        { id: 'T020', name: 'Creazione Campi custom form INC', phase: 'design', owner: 'CRMP', priority: 'Alta', start: '2026-02-17', end: '2026-03-03', critical: true, milestone: false },
        { id: 'T030', name: 'Creazione SLA di Servizio', phase: 'design', owner: 'CRMP', priority: 'Alta', start: '2026-02-17', end: '2026-02-24', critical: true, milestone: false },
        { id: 'T008', name: 'Creazione Operatori', phase: 'build', owner: 'CRMP', priority: 'Alta', start: '2026-03-03', end: '2026-03-17', critical: true, milestone: true },
        { id: 'T009', name: 'Assegnazione Ruoli e Permessi', phase: 'build', owner: 'CRMP', priority: 'Alta', start: '2026-03-03', end: '2026-03-17', critical: true, milestone: false },
        { id: 'T014', name: 'SSO Setup', phase: 'build', owner: 'Client', priority: 'Alta', start: '2026-03-03', end: '2026-03-17', critical: true, milestone: false },
        { id: 'T015', name: 'Call SSO - amministratore tenant', phase: 'build', owner: 'Client & CRMP', priority: 'Alta', start: '2026-03-03', end: '2026-03-17', critical: true, milestone: false },
        { id: 'T016', name: 'User Provisioning (da AD)', phase: 'build', owner: 'Client & CRMP', priority: 'Alta', start: '2026-03-03', end: '2026-03-17', critical: true, milestone: false },
        { id: 'T021', name: 'Workflow Assegnazione INC', phase: 'build', owner: 'CRMP', priority: 'Alta', start: '2026-03-03', end: '2026-03-17', critical: true, milestone: false },
        { id: 'T022', name: 'Workflow escalation INC', phase: 'build', owner: 'CRMP', priority: 'Alta', start: '2026-03-03', end: '2026-03-17', critical: true, milestone: false },
        { id: 'T026', name: 'Workflow Approvativi SR', phase: 'build', owner: 'CRMP', priority: 'Alta', start: '2026-03-17', end: '2026-03-31', critical: true, milestone: false },
        { id: 'T027', name: 'Workflow Orchestration', phase: 'build', owner: 'CRMP', priority: 'Alta', start: '2026-03-17', end: '2026-03-31', critical: true, milestone: false },
        { id: 'T028', name: 'Workflow Assegnazione SR', phase: 'build', owner: 'CRMP', priority: 'Alta', start: '2026-03-17', end: '2026-03-31', critical: true, milestone: false },
        { id: 'T033', name: 'Regole di chiusura ticket', phase: 'build', owner: 'CRMP', priority: 'Alta', start: '2026-03-03', end: '2026-03-17', critical: true, milestone: true },
        { id: 'T049', name: 'Formazione admin', phase: 'build', owner: 'CRMP', priority: 'Alta', start: '2026-03-17', end: '2026-03-31', critical: true, milestone: false },
        { id: 'T050', name: 'Formazione operatori', phase: 'build', owner: 'CRMP', priority: 'Alta', start: '2026-03-17', end: '2026-03-31', critical: true, milestone: true },
        { id: 'T051', name: 'Feedback e debug Rilascio 1', phase: 'build', owner: 'Client & CRMP', priority: 'Alta', start: '2026-03-17', end: '2026-04-07', critical: true, milestone: false },
        { id: 'T039', name: 'Mappatura fulfill asset SR', phase: 'uat', owner: 'CRMP', priority: 'Alta', start: '2026-04-16', end: '2026-04-30', critical: true, milestone: true },
        { id: 'T043', name: 'Struttura ticket parent child', phase: 'uat', owner: 'CRMP', priority: 'Alta', start: '2026-04-22', end: '2026-05-06', critical: true, milestone: false },
        { id: 'T052', name: 'Feedback e debug Rilascio 2', phase: 'uat', owner: 'Client & CRMP', priority: 'Alta', start: '2026-04-16', end: '2026-05-07', critical: true, milestone: false },
        { id: 'T053', name: 'Feedback e debug Rilascio 3', phase: 'uat', owner: 'Client & CRMP', priority: 'Alta', start: '2026-04-22', end: '2026-05-06', critical: true, milestone: false },
        { id: 'T006', name: 'Assets Requirements', phase: 'build', owner: 'CRMP', priority: 'Media', start: '2026-03-24', end: '2026-04-02', critical: false, milestone: true },
        { id: 'T007', name: 'Analisi onboarding/offboarding', phase: 'build', owner: 'Client', priority: 'Bassa', start: '2026-04-02', end: '2026-04-13', critical: false, milestone: false },
        { id: 'T010', name: 'Personalizzazione Anagrafica', phase: 'build', owner: 'CRMP', priority: 'Media', start: '2026-03-03', end: '2026-03-17', critical: false, milestone: false },
        { id: 'T013', name: 'Creazione Reparti', phase: 'design', owner: 'CRMP', priority: 'Media', start: '2026-02-17', end: '2026-03-03', critical: false, milestone: false },
        { id: 'T017', name: 'CNAME Configuration', phase: 'assessment', owner: 'Client & CRMP', priority: 'Media', start: '2026-02-10', end: '2026-02-24', critical: false, milestone: false },
        { id: 'T023', name: 'Regole visibilit√† SR', phase: 'design', owner: 'CRMP', priority: 'Media', start: '2026-02-17', end: '2026-03-03', critical: false, milestone: false },
        { id: 'T024', name: 'Regole di layout SR', phase: 'build', owner: 'CRMP', priority: 'Media', start: '2026-03-03', end: '2026-03-17', critical: false, milestone: false },
        { id: 'T025', name: 'Creazione tabelle dati', phase: 'build', owner: 'CRMP', priority: 'Media', start: '2026-03-03', end: '2026-03-17', critical: false, milestone: false },
        { id: 'T029', name: 'Creazione Orari di Ufficio', phase: 'build', owner: 'CRMP', priority: 'Media', start: '2026-03-03', end: '2026-03-17', critical: false, milestone: false },
        { id: 'T031', name: 'Creazione regole di Layout', phase: 'design', owner: 'CRMP', priority: 'Media', start: '2026-02-17', end: '2026-03-03', critical: false, milestone: false },
        { id: 'T032', name: 'Notifiche automatiche', phase: 'build', owner: 'CRMP', priority: 'Media', start: '2026-03-03', end: '2026-03-17', critical: false, milestone: false },
        { id: 'T034', name: 'Configurazione Survey', phase: 'build', owner: 'CRMP', priority: 'Bassa', start: '2026-03-17', end: '2026-03-31', critical: false, milestone: false },
        { id: 'T035', name: 'Call su Assets ed analisi', phase: 'build', owner: 'Client & CRMP', priority: 'Media', start: '2026-04-02', end: '2026-04-16', critical: false, milestone: false },
        { id: 'T036', name: 'Discovery probe SCCM', phase: 'build', owner: 'Client & CRMP', priority: 'Media', start: '2026-04-02', end: '2026-04-16', critical: false, milestone: false },
        { id: 'T037', name: 'Campi custom assets', phase: 'build', owner: 'CRMP', priority: 'Media', start: '2026-04-02', end: '2026-04-16', critical: false, milestone: false },
        { id: 'T038', name: 'Workflow Asset rottura stock', phase: 'uat', owner: 'CRMP', priority: 'Media', start: '2026-04-16', end: '2026-04-30', critical: false, milestone: false },
        { id: 'T040', name: 'Analisi processo Onboarding', phase: 'build', owner: 'Client & CRMP', priority: 'Media', start: '2026-04-02', end: '2026-04-13', critical: false, milestone: false },
        { id: 'T041', name: 'Creazione form HR', phase: 'uat', owner: 'Client', priority: 'Media', start: '2026-04-13', end: '2026-04-22', critical: false, milestone: false },
        { id: 'T042', name: 'Creazione Kit Onboarding', phase: 'uat', owner: 'CRMP', priority: 'Media', start: '2026-04-13', end: '2026-04-22', critical: false, milestone: false },
        { id: 'T044', name: 'Notifiche a stakeholders', phase: 'build', owner: 'CRMP', priority: 'Media', start: '2026-04-02', end: '2026-04-09', critical: false, milestone: false },
        { id: 'T045', name: 'Creazione form offboarding', phase: 'build', owner: 'CRMP', priority: 'Media', start: '2026-04-02', end: '2026-04-16', critical: false, milestone: false },
        { id: 'T047', name: 'Analisi report richiesti', phase: 'build', owner: 'Client & CRMP', priority: 'Media', start: '2026-03-17', end: '2026-03-31', critical: false, milestone: false },
        { id: 'T048', name: 'Custom reports', phase: 'build', owner: 'CRMP', priority: 'Media', start: '2026-03-17', end: '2026-03-31', critical: false, milestone: false }
    ]
};

// Utility functions
const formatDate = (dateStr) => {
    const d = new Date(dateStr);
    return d.toLocaleDateString('it-IT', { day: '2-digit', month: 'short' });
};

const getPhaseColor = (phase) => {
    const colors = { assessment: '#3b82f6', design: '#10b981', build: '#f59e0b', uat: '#8b5cf6', golive: '#ef4444' };
    return colors[phase] || '#64748b';
};

const getPhaseBadge = (phase) => {
    const badges = { assessment: 'badge-blue', design: 'badge-green', build: 'badge-orange', uat: 'badge-purple', golive: 'badge-red' };
    return badges[phase] || 'badge-gray';
};

const getOwnerBadge = (owner) => {
    if (owner === 'CRMP') return 'badge-blue';
    if (owner === 'Client') return 'badge-green';
    return 'badge-orange';
};

// Render Activity Matrix
function renderActivityMatrix() {
    const tbody = document.getElementById('activity-tbody');
    tbody.innerHTML = projectData.tasks.map(task => `
        <tr class="${task.critical ? 'critical' : ''}">
            <td>
                <div class="task-name">
                    ${task.critical ? '<span class="critical-icon">‚ö°</span>' : ''}
                    <span>${task.name}</span>
                    ${task.milestone ? '<span class="milestone-icon">üèÅ</span>' : ''}
                </div>
            </td>
            <td><span class="badge ${getPhaseBadge(task.phase)}">${task.phase.charAt(0).toUpperCase() + task.phase.slice(1)}</span></td>
            <td><span class="badge ${getOwnerBadge(task.owner)}">${task.owner}</span></td>
            <td>
                <span class="priority-dot priority-${task.priority.toLowerCase()}"></span>
                ${task.priority}
            </td>
            <td>${formatDate(task.start)}</td>
            <td>${formatDate(task.end)}</td>
            <td><span class="status-badge status-not-started">Non Iniziato</span></td>
        </tr>
    `).join('');
}

// Render Critical Path
function renderCriticalPath() {
    const container = document.getElementById('critical-list');
    const criticalTasks = projectData.tasks.filter(t => t.critical).slice(0, 10);
    
    container.innerHTML = criticalTasks.map((task, idx) => `
        <div class="critical-item">
            <div class="number">${idx + 1}</div>
            <div class="info">
                <div class="name">${task.name}</div>
                <div class="dates">${formatDate(task.start)} ‚Üí ${formatDate(task.end)}</div>
            </div>
            <div class="impact">
                <div class="label">Impatta</div>
                <div class="value">${task.phase === 'uat' ? 'Go-Live' : task.phase.charAt(0).toUpperCase() + task.phase.slice(1)}</div>
            </div>
        </div>
    `).join('');
}

// Render GANTT Chart
function renderGantt() {
    const container = document.getElementById('gantt-chart');
    const tasks = projectData.tasks;
    
    const margin = { top: 40, right: 30, bottom: 30, left: 200 };
    const width = Math.max(container.clientWidth, 900) - margin.left - margin.right;
    const barHeight = 22;
    const barPadding = 4;
    const height = (barHeight + barPadding) * tasks.length;

    const svg = d3.select(container)
        .append('svg')
        .attr('width', width + margin.left + margin.right)
        .attr('height', height + margin.top + margin.bottom);

    const chart = svg.append('g')
        .attr('transform', `translate(${margin.left}, ${margin.top})`);

    // Time scale
    const allDates = tasks.flatMap(t => [new Date(t.start), new Date(t.end)]);
    const minDate = d3.timeDay.offset(d3.min(allDates), -5);
    const maxDate = d3.timeDay.offset(d3.max(allDates), 10);

    const xScale = d3.scaleTime().domain([minDate, maxDate]).range([0, width]);
    const yScale = d3.scaleBand().domain(tasks.map(t => t.id)).range([0, height]).padding(0.15);

    // X Axis
    svg.append('g')
        .attr('transform', `translate(${margin.left}, ${margin.top - 5})`)
        .call(d3.axisTop(xScale).ticks(d3.timeWeek.every(1)).tickFormat(d3.timeFormat('%d %b')))
        .selectAll('text')
        .style('font-size', '10px')
        .style('fill', '#64748b');

    // Grid lines
    chart.selectAll('line.grid')
        .data(xScale.ticks(d3.timeWeek.every(1)))
        .enter()
        .append('line')
        .attr('x1', d => xScale(d))
        .attr('x2', d => xScale(d))
        .attr('y1', 0)
        .attr('y2', height)
        .attr('stroke', '#e2e8f0');

    // Task labels
    svg.append('g')
        .attr('transform', `translate(0, ${margin.top})`)
        .selectAll('text')
        .data(tasks)
        .enter()
        .append('text')
        .attr('x', margin.left - 10)
        .attr('y', d => yScale(d.id) + yScale.bandwidth() / 2)
        .attr('text-anchor', 'end')
        .attr('dominant-baseline', 'middle')
        .attr('font-size', '11px')
        .attr('fill', d => d.critical ? '#dc2626' : '#334155')
        .attr('font-weight', d => d.critical ? '600' : '400')
        .text(d => d.name.length > 28 ? d.name.substring(0, 28) + '...' : d.name);

    // Critical background
    chart.selectAll('rect.critical-bg')
        .data(tasks.filter(t => t.critical))
        .enter()
        .append('rect')
        .attr('x', 0)
        .attr('y', d => yScale(d.id) - 2)
        .attr('width', width)
        .attr('height', yScale.bandwidth() + 4)
        .attr('fill', '#fef2f2')
        .attr('opacity', 0.5);

    // Task bars
    chart.selectAll('rect.task')
        .data(tasks)
        .enter()
        .append('rect')
        .attr('x', d => xScale(new Date(d.start)))
        .attr('y', d => yScale(d.id))
        .attr('width', d => Math.max(xScale(new Date(d.end)) - xScale(new Date(d.start)), 5))
        .attr('height', yScale.bandwidth())
        .attr('rx', 4)
        .attr('fill', d => getPhaseColor(d.phase))
        .attr('stroke', d => d.critical ? '#dc2626' : 'none')
        .attr('stroke-width', d => d.critical ? 2 : 0);

    // Milestones
    chart.selectAll('polygon.milestone')
        .data(tasks.filter(t => t.milestone))
        .enter()
        .append('polygon')
        .attr('points', d => {
            const x = xScale(new Date(d.end)) + 10;
            const y = yScale(d.id) + yScale.bandwidth() / 2;
            return `${x},${y-8} ${x+8},${y} ${x},${y+8} ${x-8},${y}`;
        })
        .attr('fill', '#7c3aed')
        .attr('stroke', '#5b21b6');

    // Today line
    const today = new Date();
    if (today >= minDate && today <= maxDate) {
        chart.append('line')
            .attr('x1', xScale(today))
            .attr('x2', xScale(today))
            .attr('y1', 0)
            .attr('y2', height)
            .attr('stroke', '#ef4444')
            .attr('stroke-width', 2)
            .attr('stroke-dasharray', '5,3');

        chart.append('text')
            .attr('x', xScale(today))
            .attr('y', -8)
            .attr('text-anchor', 'middle')
            .attr('fill', '#ef4444')
            .attr('font-size', '10px')
            .attr('font-weight', 'bold')
            .text('OGGI');
    }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    renderActivityMatrix();
    renderCriticalPath();
    renderGantt();
});
</script>

</body>
</html>
